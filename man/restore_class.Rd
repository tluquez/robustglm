% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_props.R
\name{restore_class}
\alias{restore_class}
\title{Restore Column Classes Based on a Reference Data Frame}
\usage{
restore_class(df, reference_df, columns)
}
\arguments{
\item{df}{A data frame whose column classes need to be restored.}

\item{reference_df}{A data frame that serves as the reference
for column class restoration.}

\item{columns}{A character vector of column names to restore.}
}
\value{
A modified version of \code{df} with restored column classes.
}
\description{
This function restores the column classes of a data frame (\code{df})
to match those of a reference data frame (\code{reference_df}).
It ensures that factor levels, numeric types, dates, logicals,
and other data types are preserved as closely as possible.
}
\details{
The function checks if each specified column exists in both \code{df}
and \code{reference_df}. If so, it attempts to restore the class of \code{df[[col]]}
to match \code{reference_df[[col]]}.
\itemize{
\item Factors: Retains levels from the reference data frame.
\item Characters: Converts to character if originally character.
\item Numeric/Integer: Converts safely, avoiding unintended \code{NA} coercion.
\item Dates (\code{Date}, \code{POSIXt}): Converts from character/factor where possible.
\item Logical: Ensures valid logical values (\code{TRUE}, \code{FALSE}, \code{T}, \code{F}, \code{1}, \code{0}).
\item Lists/Complex: Converts to character for compatibility.
}

If an unexpected conversion occurs (e.g., numeric values coerced to \code{NA}),
an error is raised.
}
\examples{
reference <- data.frame(
  factor_col = factor(c("A", "B")),
  num_col = c(1.1, 2.2),
  date_col = as.Date(c("2023-01-01", "2023-01-02")),
  logical_col = c(TRUE, FALSE)
)

df <- data.frame(
  factor_col = c("A", "B"),  # Stored as character
  num_col = as.character(c(1.1, 2.2)),  # Stored as character
  date_col = c("2023-01-01", "2023-01-02"),  # Stored as character
  logical_col = c("TRUE", "FALSE")  # Stored as character
)

restored_df <- restore_class(df, reference, colnames(df))
str(restored_df)  # Check restored types
}
\keyword{internal}
